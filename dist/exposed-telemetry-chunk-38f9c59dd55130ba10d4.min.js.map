{"version":3,"file":"exposed-telemetry-chunk-38f9c59dd55130ba10d4.min.js","mappings":"4JAqBoB,MAChB,MAAMA,EAAaC,OAAOD,UAAYC,OAAOD,WAAa,GAC1D,IAAIA,EAAUE,WAGd,GAAIF,EAAUG,QACVF,OAAOG,SAAWA,QAAQC,OAASD,QAAQC,MAAM,uCAChD,CACDL,EAAUG,SAAU,EACpBH,EAAUM,QAAU,CAChB,cACA,aACA,YACA,YACA,WACA,WACA,QACA,QACA,QACA,QACA,QACA,QACA,OACA,OACA,MACA,KACA,sBACA,2BACA,iBACA,4BAEJN,EAAUO,QAAU,SAAUC,GAC1B,OAAO,WACH,IAAIC,EAAIC,MAAMC,UAAUC,MAAMC,KAAKC,WAGnC,OAFAL,EAAEM,QAAQP,GACVR,EAAUgB,KAAKP,GACRT,IAGf,IAAK,IAAIQ,EAAI,EAAGA,EAAIR,EAAUM,QAAQW,OAAQT,IAAK,CAC/C,IAAIU,EAAMlB,EAAUM,QAAQE,GAC5BR,EAAUkB,GAAOlB,EAAUO,QAAQW,GAEvClB,EAAUmB,KAAO,SAAUD,EAAKV,GAC5B,MAAMC,EAAIW,SAASC,cAAc,UACjCZ,EAAEa,KAAO,kBACTb,EAAEc,OAAQ,EACVd,EAAEe,IAAM,2CAA6CC,mBAAmBP,GAAO,oBAC/E,MAAMQ,EAAIN,SAASO,qBAAqB,UAAU,GAC9CD,EAAEE,YACFF,EAAEE,WAAWC,aAAapB,EAAGiB,GAEjC1B,EAAU8B,aAAetB,GAE7BR,EAAU+B,gBAAkB,WAMpCC,GACO,MAAMC,EAAgB,CAACC,EAAWC,KAAeC,OAlFFC,OAkFY,EAlFHC,OAkFW,EAlFIC,EAkFY,YAEtFnC,QAAQoC,IAAI,yCAA0CN,EAAWC,GACjE,MAAMM,EAAc,CAChBC,QAAS,CACLC,GAAI,YAGZ,OAAQT,GACJ,IAAK,WACD,MAAM,KAAEU,GAAST,EAAYU,EAnFH,SAAUC,EAAGtC,GAC/C,IAAIC,EAAI,GACR,IAAK,IAAIsC,KAAKD,EAAOE,OAAOrC,UAAUsC,eAAepC,KAAKiC,EAAGC,IAAMvC,EAAE0C,QAAQH,GAAK,IAC9EtC,EAAEsC,GAAKD,EAAEC,IACb,GAAS,MAALD,GAAqD,mBAAjCE,OAAOG,sBACtB,KAAIC,EAAI,EAAb,IAAgBL,EAAIC,OAAOG,sBAAsBL,GAAIM,EAAIL,EAAE9B,OAAQmC,IAC3D5C,EAAE0C,QAAQH,EAAEK,IAAM,GAAKJ,OAAOrC,UAAU0C,qBAAqBxC,KAAKiC,EAAGC,EAAEK,MACvE3C,EAAEsC,EAAEK,IAAMN,EAAEC,EAAEK,KAE1B,OAAO3C,EA0EgD6C,CAAOnB,EAAY,CAAC,SAC7DoB,EAAKX,EAAKY,SAASC,KAAO,GAAGC,SAASC,QAAQf,EAAKY,SAASI,OAE5DC,QAA0BC,OAAOC,OAAOC,OAAO,SAAS,IAAIC,aAAcC,OAAOX,IAEjFY,EADmBzD,MAAM0D,KAAK,IAAIC,WAAWR,IACdS,KAAKC,GAAMA,EAAEC,SAAS,IAAIC,SAAS,EAAG,OAAMC,KAAK,IACtFzE,OAAOD,UAAU2E,SAASR,EAAatB,EAAiBJ,GACxD,MACJ,IAAK,OACDxC,OAAOD,UAAU4E,UAAKC,EAAW1C,EAAYM,GAC7C,MACJ,QACIxC,OAAOD,UAAU8E,MAAM5C,EAAWC,EAAYM,KAtG/C,KAFgEsC,OAkFO,KAhF5DA,EAAIC,WAAU,SAAUC,EAASC,GAC/C,SAASC,EAAUC,GAAS,IAAMC,EAAK9C,EAAU+C,KAAKF,IAAW,MAAO5E,GAAK0E,EAAO1E,IACpF,SAAS+E,EAASH,GAAS,IAAMC,EAAK9C,EAAiB,MAAE6C,IAAW,MAAO5E,GAAK0E,EAAO1E,IACvF,SAAS6E,EAAKG,GAJlB,IAAeJ,EAIaI,EAAOC,KAAOR,EAAQO,EAAOJ,QAJ1CA,EAIyDI,EAAOJ,MAJhDA,aAAiBL,EAAIK,EAAQ,IAAIL,GAAE,SAAUE,GAAWA,EAAQG,OAITM,KAAKP,EAAWI,GAClGF,GAAM9C,EAAYA,EAAUoD,MAAMtD,EAASC,GAAc,KAAKgD,WAN1B,IAAUjD,EAASC,EAAYyC,EAAGxC","sources":["webpack://console-demo-plugin/./utils/telemetry.ts"],"sourcesContent":["var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nconst SEGMENT_KEY = '';\nconst initSegment = () => {\n    const analytics = (window.analytics = window.analytics || []);\n    if (analytics.initialize) {\n        return;\n    }\n    if (analytics.invoked)\n        window.console && console.error && console.error('Segment snippet included twice.');\n    else {\n        analytics.invoked = true;\n        analytics.methods = [\n            'trackSubmit',\n            'trackClick',\n            'trackLink',\n            'trackForm',\n            'pageview',\n            'identify',\n            'reset',\n            'group',\n            'track',\n            'ready',\n            'alias',\n            'debug',\n            'page',\n            'once',\n            'off',\n            'on',\n            'addSourceMiddleware',\n            'addIntegrationMiddleware',\n            'setAnonymousId',\n            'addDestinationMiddleware',\n        ];\n        analytics.factory = function (e) {\n            return function () {\n                let t = Array.prototype.slice.call(arguments);\n                t.unshift(e);\n                analytics.push(t);\n                return analytics;\n            };\n        };\n        for (let e = 0; e < analytics.methods.length; e++) {\n            let key = analytics.methods[e];\n            analytics[key] = analytics.factory(key);\n        }\n        analytics.load = function (key, e) {\n            const t = document.createElement('script');\n            t.type = 'text/javascript';\n            t.async = true;\n            t.src = 'https://cdn.segment.com/analytics.js/v1/' + encodeURIComponent(key) + '/analytics.min.js';\n            const n = document.getElementsByTagName('script')[0];\n            if (n.parentNode) {\n                n.parentNode.insertBefore(t, n);\n            }\n            analytics._loadOptions = e;\n        };\n        analytics.SNIPPET_VERSION = '4.13.1';\n        if (SEGMENT_KEY) {\n            analytics.load(SEGMENT_KEY);\n        }\n    }\n};\ninitSegment();\nexport const eventListener = (eventType, properties) => __awaiter(void 0, void 0, void 0, function* () {\n    // eslint-disable-next-line no-console\n    console.log('Demo Plugin received telemetry event: ', eventType, properties);\n    const anonymousIP = {\n        context: {\n            ip: '0.0.0.0',\n        },\n    };\n    switch (eventType) {\n        case 'identify':\n            const { user } = properties, otherProperties = __rest(properties, [\"user\"]);\n            const id = user.metadata.uid || `${location.host}-${user.metadata.name}`;\n            // Use SHA1 hash algorithm to anonymize the user\n            const anonymousIdBuffer = yield crypto.subtle.digest('SHA-1', new TextEncoder().encode(id));\n            const anonymousIdArray = Array.from(new Uint8Array(anonymousIdBuffer));\n            const anonymousId = anonymousIdArray.map((b) => b.toString(16).padStart(2, '0')).join('');\n            window.analytics.identify(anonymousId, otherProperties, anonymousIP);\n            break;\n        case 'page':\n            window.analytics.page(undefined, properties, anonymousIP);\n            break;\n        default:\n            window.analytics.track(eventType, properties, anonymousIP);\n    }\n});\n"],"names":["analytics","window","initialize","invoked","console","error","methods","factory","e","t","Array","prototype","slice","call","arguments","unshift","push","length","key","load","document","createElement","type","async","src","encodeURIComponent","n","getElementsByTagName","parentNode","insertBefore","_loadOptions","SNIPPET_VERSION","initSegment","eventListener","eventType","properties","__awaiter","thisArg","_arguments","generator","log","anonymousIP","context","ip","user","otherProperties","s","p","Object","hasOwnProperty","indexOf","getOwnPropertySymbols","i","propertyIsEnumerable","__rest","id","metadata","uid","location","host","name","anonymousIdBuffer","crypto","subtle","digest","TextEncoder","encode","anonymousId","from","Uint8Array","map","b","toString","padStart","join","identify","page","undefined","track","P","Promise","resolve","reject","fulfilled","value","step","next","rejected","result","done","then","apply"],"sourceRoot":""}